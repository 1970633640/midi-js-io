<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script src="lib/anime.js"></script>
    <script src="lib/webmidi.js"></script>
    <script src="lib/vue.js"></script>
    <link href="css/mui.css" rel="stylesheet" type="text/css"/>
    <script src="js/mui.js"></script>
    <script src="js/piano-keys.js"></script>
    <script src="js/animation.js"></script>
    <script src="js/functions.js"></script>

    <link href="css/index.css" rel="stylesheet">
    <link href="css/piano.css" rel="stylesheet">

</head>
<body>
<div w3-include-html="midi_io.html"></div>



<div id="midi-set" class="panel" style="width:500px;height:300px;margin-left: 550px;">
    <button class="mui-btn mui-btn--fab mui-btn--primary" style="font-size:20px; float:right;"
            onclick="panel_close('#midi-set')">×
    </button>

    <br>输出乐器选择
    <select  id="midi-instrument">
        <option :value="item" v-for="item in items">{{item}}</option>
    </select>
    <button class="mui-btn mui-btn--primary" onclick="change_instrument();">应用</button>
    <br><br><br>屏幕按键力度
    <label><input type="checkbox" id="midi-force-velocity">忽略输出按键力度强制设为1</label>
    <button class="mui-btn mui-btn--primary" onclick="save_velocity();">应用</button>
    <h2 style="position:absolute;bottom:0;width:90%;" onclick="panel_on('#midi-set');"><br>MIDI 乐器设置</h2>
</div>


<div id="midi-record" class="panel" style="width:700px;height:300px;margin-left: 1100px;">
    <button class="mui-btn mui-btn--fab mui-btn--primary" style="font-size:20px; float:right;"
            onclick="panel_close('#midi-record')">×
    </button>
    <div>数据量：
        <div id="recorded_length" style="display: inline">0</div> &nbsp;个按键数据
    </div>
    <button id="record_button" class="mui-btn mui-btn--danger" onclick="start_record()" style="font-size:20px;">●
    </button>
    <button class="mui-btn mui-btn--primary" onclick="start_playback();" style="font-size:20px;">▶</button>
    &nbsp;播放速度&nbsp;<input style="width:60px;" type="text" id="midi-playback-speed" />x
    <br>
    <button class="mui-btn mui-btn--primary" onclick="copy_out();" >导出到剪贴板</button>
    <button class="mui-btn mui-btn--primary" onclick="copy_in();" >从剪贴板导入</button>
    <br>
    <label><input type="checkbox" id="midi-force-sparks">自动按键火花</label>
    <br><label><input type="checkbox" id="midi-force-keydown">自动按键红色提示</label>
    <br><label><input type="checkbox" id="midi-force-output">自动按键声音</label>
    <br><br>
    <label><input type="checkbox" id="midi-keydown-sparks">按键火花</label>
    <br><label><input type="checkbox" id="midi-keydown-keydown">按键红色提示</label>
    <button class="mui-btn mui-btn--primary" style="float:right;margin-left:10px;" onclick="save_effect();">应用</button>
    <br><label><input type="checkbox" id="midi-keydown-output">按键声音</label>
    <br><label><input type="checkbox" id="midi-keydown-bars">按键彩条</label>

    <h2 style="position:absolute;bottom:0;width:90%;" onclick="panel_on('#midi-record')">录制/回放</h2>
</div>
<div w3-include-html="midi_record.html"></div>

<canvas id="fireworks" ></canvas>
<canvas id="bars" ></canvas>
<div id="keys" style="width:100%;height:150px;">


</div>

<script>
    create_piano_keys();
</script>

<script>
    includeHTML();
</script>

<script src="js/miditest.js"></script>
<script src="js/midi-events.js"></script>
<script src="js/fireworks.js"></script>
<script src="js/square.js"></script>
<script src="js/record.js"></script>
</body>

</html>